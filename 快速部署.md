# 🚀 快速部署测试模式更新

## 方法1：使用部署脚本（最简单）

```powershell
# 在项目根目录运行
.\deploy-test.ps1
```

脚本会自动：
1. ✅ 检查 Git 状态
2. ✅ 添加所有更改
3. ✅ 提交代码
4. ✅ 推送到 GitHub
5. ✅ 触发 Vercel 自动部署

## 方法2：手动 Git 部署

```powershell
# 1. 添加所有文件
git add .

# 2. 提交更改
git commit -m "feat: 添加测试模式功能"

# 3. 推送到 GitHub（会自动触发 Vercel 部署）
git push origin main
```

## 方法3：使用 Vercel CLI

```powershell
# 1. 安装 Vercel CLI（如果还没有）
npm i -g vercel

# 2. 登录（如果还没登录）
vercel login

# 3. 部署到生产环境
npm run deploy

# 或直接使用
vercel --prod
```

## 方法4：通过 Vercel Dashboard

1. 访问 https://vercel.com/dashboard
2. 找到你的项目
3. 点击 "Deployments" 标签
4. 点击 "Redeploy" 按钮
5. 选择最新的提交

## ✅ 部署前检查

确保以下文件都已创建：

- [x] `app/test/page.tsx` - 测试模式页面
- [x] `app/api/test/create/route.ts` - 创建测试房间API
- [x] `app/api/test/auto-action/route.ts` - AI自动行动API
- [x] `.github/workflows/auto-deploy.yml` - 自动部署配置
- [x] `vercel.json` - Vercel 配置
- [x] 国际化翻译已添加

## 🔍 验证部署

部署完成后（约2-3分钟），访问：

1. **测试模式页面**: `https://你的域名.vercel.app/test`
2. **主页**: `https://你的域名.vercel.app/` (应该看到"进入测试模式"按钮)

## 🧪 测试功能

1. 访问 `/test` 页面
2. 输入玩家昵称
3. 选择一个角色（如：技能观测者）
4. 选择游戏板子
5. 点击"开始测试"
6. 验证：
   - ✅ AI玩家自动创建（6-8个）
   - ✅ 游戏正常开始
   - ✅ AI自动行动和投票

## ⚠️ 如果部署失败

### 检查 Vercel 日志
1. 访问 Vercel Dashboard
2. 点击最新的部署
3. 查看 "Logs" 标签

### 常见问题

**问题1: 构建失败**
```powershell
# 本地测试构建
npm run build
```

**问题2: 环境变量未配置**
- 在 Vercel Dashboard → Settings → Environment Variables
- 确保配置了：
  - `NEXT_PUBLIC_SUPABASE_URL`
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - `SUPABASE_SERVICE_KEY`

**问题3: 类型错误**
```powershell
# 检查类型
npm run type-check
```

## 📊 部署状态

部署成功后，你会看到：
- ✅ Vercel Dashboard 显示 "Ready"
- ✅ 可以访问测试模式页面
- ✅ 功能正常工作

## 🎉 完成！

部署完成后，测试模式就可以使用了！

**下一步：**
- 测试各个角色的功能
- 验证AI自动行动
- 检查国际化是否正常

